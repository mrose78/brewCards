<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Beer Styles Checklist</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            max-width: 400px;
            margin: auto;
        }
        .style-item {
            display: flex;
            justify-content: space-between;
            padding: 10px;
            border-bottom: 1px solid #ddd;
        }
        .missing {
            color: red;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <h2>Beer Styles Checklist</h2>
    <div id="styles-list"></div>
    
    <script>
        async function fetchCSV(url) {
            const response = await fetch(url);
            const text = await response.text();
            return text.split('\n').slice(1).map(line => line.split(',').map(cell => cell.replace(/\"/g, '').trim()));
        }

        async function loadData() {
            const checkins = await fetchCSV('csv/checkins.csv');
            const styles = await fetchCSV('csv/styles.csv');
            
            const styleCounts = {};
            checkins.forEach(row => {
                const style = row[2]; // Adjusted index for beer_type
                if (style) styleCounts[style] = (styleCounts[style] || 0) + 1;
            });
            
            const stylesList = document.getElementById('styles-list');
            styles.forEach(row => {
                const style = row[0];
                const count = styleCounts[style] || 0;
                const item = document.createElement('div');
                item.className = 'style-item';
                item.innerHTML = `
                    <span class="${count === 0 ? 'missing' : ''}">${style}</span>
                    <span>${count}</span>
                `;
                stylesList.appendChild(item);
            });
        }

        loadData();
    </script>
</body>
</html>
